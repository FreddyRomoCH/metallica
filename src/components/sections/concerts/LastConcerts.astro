---
import { fetchLastTwoConcerts } from "../../../services/metallica-data";
import Concerts from "./Concerts.astro";
---

{
  await (async () => {
    const lastTwoConcerts = await fetchLastTwoConcerts();
    const first = lastTwoConcerts[0];

    if (first && "error" in first) {
      return (
        <div class="border-red-600 border rounded-sm p-4 bg-gray-700/50">
          <p class="text-white text-lg tracking-widest">{first.message}</p>
        </div>
      );
    }

    return <Concerts lastConcerts={lastTwoConcerts} />;
  })()
}
